{"remainingRequest":"/home/artur/programowanie/organiser/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/artur/programowanie/organiser/src/components/RoutineCalendar.vue?vue&type=style&index=0&id=5b4bb5bc&scoped=true&lang=scss&","dependencies":[{"path":"/home/artur/programowanie/organiser/src/components/RoutineCalendar.vue","mtime":1625156798936},{"path":"/home/artur/programowanie/organiser/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/artur/programowanie/organiser/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/artur/programowanie/organiser/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/artur/programowanie/organiser/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/artur/programowanie/organiser/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/artur/programowanie/organiser/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoudi1ldmVudC1kcmFnZ2FibGUgewogIHBhZGRpbmctbGVmdDogNnB4Owp9Cgoudi1ldmVudC10aW1lZCB7CiAgdXNlci1zZWxlY3Q6IG5vbmU7CiAgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTsKfQoKLnYtZXZlbnQtZHJhZy1ib3R0b20gewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICBsZWZ0OiAwOwogIHJpZ2h0OiAwOwogIGJvdHRvbTogNHB4OwogIGhlaWdodDogNHB4OwogIGN1cnNvcjogbnMtcmVzaXplOwoKICAmOjphZnRlciB7CiAgICBkaXNwbGF5OiBub25lOwogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgbGVmdDogNTAlOwogICAgaGVpZ2h0OiA0cHg7CiAgICBib3JkZXItdG9wOiAxcHggc29saWQgd2hpdGU7CiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgd2hpdGU7CiAgICB3aWR0aDogMTZweDsKICAgIG1hcmdpbi1sZWZ0OiAtOHB4OwogICAgb3BhY2l0eTogMC44OwogICAgY29udGVudDogIiI7CiAgfQoKICAmOmhvdmVyOjphZnRlciB7CiAgICBkaXNwbGF5OiBibG9jazsKICB9Cn0K"},{"version":3,"sources":["RoutineCalendar.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiNA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"RoutineCalendar.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <v-row class=\"fill-height\">\n    <v-col>\n      <v-sheet height=\"600\">\n        <v-calendar\n          ref=\"calendar\"\n          v-model=\"value\"\n          color=\"black\"\n          type=\"week\"\n          :events=\"events\"\n          :event-color=\"getEventColor\"\n          :event-ripple=\"false\"\n          @change=\"getEvents\"\n          @mousedown:event=\"startDrag\"\n          @mousedown:time=\"startTime\"\n          @mousemove:time=\"mouseMove\"\n          @mouseup:time=\"endDrag\"\n          @mouseleave.native=\"cancelDrag\"\n        >\n          <template v-slot:event=\"{ event, timed, eventSummary }\">\n            <div class=\"v-event-draggable\" v-html=\"eventSummary()\"></div>\n            <div\n              v-if=\"timed\"\n              class=\"v-event-drag-bottom\"\n              @mousedown.stop=\"extendBottom(event)\"\n            ></div>\n          </template>\n        </v-calendar>\n      </v-sheet>\n    </v-col>\n  </v-row>\n</template>\n\n<script>\nexport default {\n  name: \"RoutineCalendar\",\n  data: () => ({\n    value: \"\",\n    events: [],\n    colors: [\n      \"#2196F3\",\n      \"#3F51B5\",\n      \"#673AB7\",\n      \"#00BCD4\",\n      \"#4CAF50\",\n      \"#FF9800\",\n      \"#757575\",\n    ],\n    names: [\n      \"Meeting\",\n      \"Holiday\",\n      \"PTO\",\n      \"Travel\",\n      \"Event\",\n      \"Birthday\",\n      \"Conference\",\n      \"Party\",\n    ],\n    dragEvent: null,\n    dragStart: null,\n    createEvent: null,\n    createStart: null,\n    extendOriginal: null,\n  }),\n  methods: {\n    startDrag({ event, timed }) {\n      if (event && timed) {\n        this.dragEvent = event;\n        this.dragTime = null;\n        this.extendOriginal = null;\n      }\n    },\n    startTime(tms) {\n      const mouse = this.toTime(tms);\n\n      if (this.dragEvent && this.dragTime === null) {\n        const start = this.dragEvent.start;\n\n        this.dragTime = mouse - start;\n      } else {\n        this.createStart = this.roundTime(mouse);\n        this.createEvent = {\n          name: `Event #${this.events.length}`,\n          color: this.rndElement(this.colors),\n          start: this.createStart,\n          end: this.createStart,\n          timed: true,\n        };\n\n        this.events.push(this.createEvent);\n      }\n    },\n    extendBottom(event) {\n      this.createEvent = event;\n      this.createStart = event.start;\n      this.extendOriginal = event.end;\n    },\n    mouseMove(tms) {\n      const mouse = this.toTime(tms);\n\n      if (this.dragEvent && this.dragTime !== null) {\n        const start = this.dragEvent.start;\n        const end = this.dragEvent.end;\n        const duration = end - start;\n        const newStartTime = mouse - this.dragTime;\n        const newStart = this.roundTime(newStartTime);\n        const newEnd = newStart + duration;\n\n        this.dragEvent.start = newStart;\n        this.dragEvent.end = newEnd;\n      } else if (this.createEvent && this.createStart !== null) {\n        const mouseRounded = this.roundTime(mouse, false);\n        const min = Math.min(mouseRounded, this.createStart);\n        const max = Math.max(mouseRounded, this.createStart);\n\n        this.createEvent.start = min;\n        this.createEvent.end = max;\n      }\n    },\n    endDrag() {\n      this.dragTime = null;\n      this.dragEvent = null;\n      this.createEvent = null;\n      this.createStart = null;\n      this.extendOriginal = null;\n    },\n    cancelDrag() {\n      if (this.createEvent) {\n        if (this.extendOriginal) {\n          this.createEvent.end = this.extendOriginal;\n        } else {\n          const i = this.events.indexOf(this.createEvent);\n          if (i !== -1) {\n            this.events.splice(i, 1);\n          }\n        }\n      }\n\n      this.createEvent = null;\n      this.createStart = null;\n      this.dragTime = null;\n      this.dragEvent = null;\n    },\n    roundTime(time, down = true) {\n      const roundTo = 15; // minutes\n      const roundDownTime = roundTo * 60 * 1000;\n\n      return down\n        ? time - (time % roundDownTime)\n        : time + (roundDownTime - (time % roundDownTime));\n    },\n    toTime(tms) {\n      return new Date(\n        tms.year,\n        tms.month - 1,\n        tms.day,\n        tms.hour,\n        tms.minute\n      ).getTime();\n    },\n    getEventColor(event) {\n      const rgb = parseInt(event.color.substring(1), 16);\n      const r = (rgb >> 16) & 0xff;\n      const g = (rgb >> 8) & 0xff;\n      const b = (rgb >> 0) & 0xff;\n\n      return event === this.dragEvent\n        ? `rgba(${r}, ${g}, ${b}, 0.7)`\n        : event === this.createEvent\n        ? `rgba(${r}, ${g}, ${b}, 0.7)`\n        : event.color;\n    },\n    getEvents({ start, end }) {\n      const events = [];\n\n      const min = new Date(`${start.date}T00:00:00`).getTime();\n      const max = new Date(`${end.date}T23:59:59`).getTime();\n      const days = (max - min) / 86400000;\n      const eventCount = this.rnd(days, days + 20);\n\n      for (let i = 0; i < eventCount; i++) {\n        const timed = this.rnd(0, 3) !== 0;\n        const firstTimestamp = this.rnd(min, max);\n        const secondTimestamp = this.rnd(2, timed ? 8 : 288) * 900000;\n        const start = firstTimestamp - (firstTimestamp % 900000);\n        const end = start + secondTimestamp;\n\n        events.push({\n          name: this.rndElement(this.names),\n          color: this.rndElement(this.colors),\n          start,\n          end,\n          timed,\n        });\n      }\n\n      this.events = events;\n    },\n    rnd(a, b) {\n      return Math.floor((b - a + 1) * Math.random()) + a;\n    },\n    rndElement(arr) {\n      return arr[this.rnd(0, arr.length - 1)];\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n.v-event-draggable {\n  padding-left: 6px;\n}\n\n.v-event-timed {\n  user-select: none;\n  -webkit-user-select: none;\n}\n\n.v-event-drag-bottom {\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 4px;\n  height: 4px;\n  cursor: ns-resize;\n\n  &::after {\n    display: none;\n    position: absolute;\n    left: 50%;\n    height: 4px;\n    border-top: 1px solid white;\n    border-bottom: 1px solid white;\n    width: 16px;\n    margin-left: -8px;\n    opacity: 0.8;\n    content: \"\";\n  }\n\n  &:hover::after {\n    display: block;\n  }\n}\n</style>\nParty\n"]}]}
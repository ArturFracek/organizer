{"remainingRequest":"/home/artur/programowanie/organiser/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/artur/programowanie/organiser/src/components/RoutineCalendar.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/artur/programowanie/organiser/src/components/RoutineCalendar.vue","mtime":1620728775412},{"path":"/home/artur/programowanie/organiser/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/artur/programowanie/organiser/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/artur/programowanie/organiser/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/artur/programowanie/organiser/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiUm91dGluZUNhbGVuZGFyIiwKICBkYXRhOiAoKSA9PiAoewogICAgdmFsdWU6ICcnLAogICAgZXZlbnRzOiBbXSwKICAgIGNvbG9yczogWycjMjE5NkYzJywgJyMzRjUxQjUnLCAnIzY3M0FCNycsICcjMDBCQ0Q0JywgJyM0Q0FGNTAnLCAnI0ZGOTgwMCcsICcjNzU3NTc1J10sCiAgICBuYW1lczogWydNZWV0aW5nJywgJ0hvbGlkYXknLCAnUFRPJywgJ1RyYXZlbCcsICdFdmVudCcsICdCaXJ0aGRheScsICdDb25mZXJlbmNlJywgJ1BhcnR5J10sCiAgICBkcmFnRXZlbnQ6IG51bGwsCiAgICBkcmFnU3RhcnQ6IG51bGwsCiAgICBjcmVhdGVFdmVudDogbnVsbCwKICAgIGNyZWF0ZVN0YXJ0OiBudWxsLAogICAgZXh0ZW5kT3JpZ2luYWw6IG51bGwsCiAgfSksCiAgbWV0aG9kczogewogICAgc3RhcnREcmFnICh7IGV2ZW50LCB0aW1lZCB9KSB7CiAgICAgIGlmIChldmVudCAmJiB0aW1lZCkgewogICAgICAgIHRoaXMuZHJhZ0V2ZW50ID0gZXZlbnQKICAgICAgICB0aGlzLmRyYWdUaW1lID0gbnVsbAogICAgICAgIHRoaXMuZXh0ZW5kT3JpZ2luYWwgPSBudWxsCiAgICAgIH0KICAgIH0sCiAgICBzdGFydFRpbWUgKHRtcykgewogICAgICBjb25zdCBtb3VzZSA9IHRoaXMudG9UaW1lKHRtcykKCiAgICAgIGlmICh0aGlzLmRyYWdFdmVudCAmJiB0aGlzLmRyYWdUaW1lID09PSBudWxsKSB7CiAgICAgICAgY29uc3Qgc3RhcnQgPSB0aGlzLmRyYWdFdmVudC5zdGFydAoKICAgICAgICB0aGlzLmRyYWdUaW1lID0gbW91c2UgLSBzdGFydAogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuY3JlYXRlU3RhcnQgPSB0aGlzLnJvdW5kVGltZShtb3VzZSkKICAgICAgICB0aGlzLmNyZWF0ZUV2ZW50ID0gewogICAgICAgICAgbmFtZTogYEV2ZW50ICMke3RoaXMuZXZlbnRzLmxlbmd0aH1gLAogICAgICAgICAgY29sb3I6IHRoaXMucm5kRWxlbWVudCh0aGlzLmNvbG9ycyksCiAgICAgICAgICBzdGFydDogdGhpcy5jcmVhdGVTdGFydCwKICAgICAgICAgIGVuZDogdGhpcy5jcmVhdGVTdGFydCwKICAgICAgICAgIHRpbWVkOiB0cnVlLAogICAgICAgIH0KCiAgICAgICAgdGhpcy5ldmVudHMucHVzaCh0aGlzLmNyZWF0ZUV2ZW50KQogICAgICB9CiAgICB9LAogICAgZXh0ZW5kQm90dG9tIChldmVudCkgewogICAgICB0aGlzLmNyZWF0ZUV2ZW50ID0gZXZlbnQKICAgICAgdGhpcy5jcmVhdGVTdGFydCA9IGV2ZW50LnN0YXJ0CiAgICAgIHRoaXMuZXh0ZW5kT3JpZ2luYWwgPSBldmVudC5lbmQKICAgIH0sCiAgICBtb3VzZU1vdmUgKHRtcykgewogICAgICBjb25zdCBtb3VzZSA9IHRoaXMudG9UaW1lKHRtcykKCiAgICAgIGlmICh0aGlzLmRyYWdFdmVudCAmJiB0aGlzLmRyYWdUaW1lICE9PSBudWxsKSB7CiAgICAgICAgY29uc3Qgc3RhcnQgPSB0aGlzLmRyYWdFdmVudC5zdGFydAogICAgICAgIGNvbnN0IGVuZCA9IHRoaXMuZHJhZ0V2ZW50LmVuZAogICAgICAgIGNvbnN0IGR1cmF0aW9uID0gZW5kIC0gc3RhcnQKICAgICAgICBjb25zdCBuZXdTdGFydFRpbWUgPSBtb3VzZSAtIHRoaXMuZHJhZ1RpbWUKICAgICAgICBjb25zdCBuZXdTdGFydCA9IHRoaXMucm91bmRUaW1lKG5ld1N0YXJ0VGltZSkKICAgICAgICBjb25zdCBuZXdFbmQgPSBuZXdTdGFydCArIGR1cmF0aW9uCgogICAgICAgIHRoaXMuZHJhZ0V2ZW50LnN0YXJ0ID0gbmV3U3RhcnQKICAgICAgICB0aGlzLmRyYWdFdmVudC5lbmQgPSBuZXdFbmQKICAgICAgfSBlbHNlIGlmICh0aGlzLmNyZWF0ZUV2ZW50ICYmIHRoaXMuY3JlYXRlU3RhcnQgIT09IG51bGwpIHsKICAgICAgICBjb25zdCBtb3VzZVJvdW5kZWQgPSB0aGlzLnJvdW5kVGltZShtb3VzZSwgZmFsc2UpCiAgICAgICAgY29uc3QgbWluID0gTWF0aC5taW4obW91c2VSb3VuZGVkLCB0aGlzLmNyZWF0ZVN0YXJ0KQogICAgICAgIGNvbnN0IG1heCA9IE1hdGgubWF4KG1vdXNlUm91bmRlZCwgdGhpcy5jcmVhdGVTdGFydCkKCiAgICAgICAgdGhpcy5jcmVhdGVFdmVudC5zdGFydCA9IG1pbgogICAgICAgIHRoaXMuY3JlYXRlRXZlbnQuZW5kID0gbWF4CiAgICAgIH0KICAgIH0sCiAgICBlbmREcmFnICgpIHsKICAgICAgdGhpcy5kcmFnVGltZSA9IG51bGwKICAgICAgdGhpcy5kcmFnRXZlbnQgPSBudWxsCiAgICAgIHRoaXMuY3JlYXRlRXZlbnQgPSBudWxsCiAgICAgIHRoaXMuY3JlYXRlU3RhcnQgPSBudWxsCiAgICAgIHRoaXMuZXh0ZW5kT3JpZ2luYWwgPSBudWxsCiAgICB9LAogICAgY2FuY2VsRHJhZyAoKSB7CiAgICAgIGlmICh0aGlzLmNyZWF0ZUV2ZW50KSB7CiAgICAgICAgaWYgKHRoaXMuZXh0ZW5kT3JpZ2luYWwpIHsKICAgICAgICAgIHRoaXMuY3JlYXRlRXZlbnQuZW5kID0gdGhpcy5leHRlbmRPcmlnaW5hbAogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zdCBpID0gdGhpcy5ldmVudHMuaW5kZXhPZih0aGlzLmNyZWF0ZUV2ZW50KQogICAgICAgICAgaWYgKGkgIT09IC0xKSB7CiAgICAgICAgICAgIHRoaXMuZXZlbnRzLnNwbGljZShpLCAxKQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5jcmVhdGVFdmVudCA9IG51bGwKICAgICAgdGhpcy5jcmVhdGVTdGFydCA9IG51bGwKICAgICAgdGhpcy5kcmFnVGltZSA9IG51bGwKICAgICAgdGhpcy5kcmFnRXZlbnQgPSBudWxsCiAgICB9LAogICAgcm91bmRUaW1lICh0aW1lLCBkb3duID0gdHJ1ZSkgewogICAgICBjb25zdCByb3VuZFRvID0gMTUgLy8gbWludXRlcwogICAgICBjb25zdCByb3VuZERvd25UaW1lID0gcm91bmRUbyAqIDYwICogMTAwMAoKICAgICAgcmV0dXJuIGRvd24KICAgICAgICA/IHRpbWUgLSB0aW1lICUgcm91bmREb3duVGltZQogICAgICAgIDogdGltZSArIChyb3VuZERvd25UaW1lIC0gKHRpbWUgJSByb3VuZERvd25UaW1lKSkKICAgIH0sCiAgICB0b1RpbWUgKHRtcykgewogICAgICByZXR1cm4gbmV3IERhdGUodG1zLnllYXIsIHRtcy5tb250aCAtIDEsIHRtcy5kYXksIHRtcy5ob3VyLCB0bXMubWludXRlKS5nZXRUaW1lKCkKICAgIH0sCiAgICBnZXRFdmVudENvbG9yIChldmVudCkgewogICAgICBjb25zdCByZ2IgPSBwYXJzZUludChldmVudC5jb2xvci5zdWJzdHJpbmcoMSksIDE2KQogICAgICBjb25zdCByID0gKHJnYiA+PiAxNikgJiAweEZGCiAgICAgIGNvbnN0IGcgPSAocmdiID4+IDgpICYgMHhGRgogICAgICBjb25zdCBiID0gKHJnYiA+PiAwKSAmIDB4RkYKCiAgICAgIHJldHVybiBldmVudCA9PT0gdGhpcy5kcmFnRXZlbnQKICAgICAgICA/IGByZ2JhKCR7cn0sICR7Z30sICR7Yn0sIDAuNylgCiAgICAgICAgOiBldmVudCA9PT0gdGhpcy5jcmVhdGVFdmVudAogICAgICAgICAgPyBgcmdiYSgke3J9LCAke2d9LCAke2J9LCAwLjcpYAogICAgICAgICAgOiBldmVudC5jb2xvcgogICAgfSwKICAgIGdldEV2ZW50cyAoeyBzdGFydCwgZW5kIH0pIHsKICAgICAgY29uc3QgZXZlbnRzID0gW10KCiAgICAgIGNvbnN0IG1pbiA9IG5ldyBEYXRlKGAke3N0YXJ0LmRhdGV9VDAwOjAwOjAwYCkuZ2V0VGltZSgpCiAgICAgIGNvbnN0IG1heCA9IG5ldyBEYXRlKGAke2VuZC5kYXRlfVQyMzo1OTo1OWApLmdldFRpbWUoKQogICAgICBjb25zdCBkYXlzID0gKG1heCAtIG1pbikgLyA4NjQwMDAwMAogICAgICBjb25zdCBldmVudENvdW50ID0gdGhpcy5ybmQoZGF5cywgZGF5cyArIDIwKQoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBldmVudENvdW50OyBpKyspIHsKICAgICAgICBjb25zdCB0aW1lZCA9IHRoaXMucm5kKDAsIDMpICE9PSAwCiAgICAgICAgY29uc3QgZmlyc3RUaW1lc3RhbXAgPSB0aGlzLnJuZChtaW4sIG1heCkKICAgICAgICBjb25zdCBzZWNvbmRUaW1lc3RhbXAgPSB0aGlzLnJuZCgyLCB0aW1lZCA/IDggOiAyODgpICogOTAwMDAwCiAgICAgICAgY29uc3Qgc3RhcnQgPSBmaXJzdFRpbWVzdGFtcCAtIChmaXJzdFRpbWVzdGFtcCAlIDkwMDAwMCkKICAgICAgICBjb25zdCBlbmQgPSBzdGFydCArIHNlY29uZFRpbWVzdGFtcAoKICAgICAgICBldmVudHMucHVzaCh7CiAgICAgICAgICBuYW1lOiB0aGlzLnJuZEVsZW1lbnQodGhpcy5uYW1lcyksCiAgICAgICAgICBjb2xvcjogdGhpcy5ybmRFbGVtZW50KHRoaXMuY29sb3JzKSwKICAgICAgICAgIHN0YXJ0LAogICAgICAgICAgZW5kLAogICAgICAgICAgdGltZWQsCiAgICAgICAgfSkKICAgICAgfQoKICAgICAgdGhpcy5ldmVudHMgPSBldmVudHMKICAgIH0sCiAgICBybmQgKGEsIGIpIHsKICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKGIgLSBhICsgMSkgKiBNYXRoLnJhbmRvbSgpKSArIGEKICAgIH0sCiAgICBybmRFbGVtZW50IChhcnIpIHsKICAgICAgcmV0dXJuIGFyclt0aGlzLnJuZCgwLCBhcnIubGVuZ3RoIC0gMSldCiAgICB9LAogIH0sCn0K"},{"version":3,"sources":["RoutineCalendar.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"RoutineCalendar.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <v-row class=\"fill-height\">\n    <v-col>\n      <v-sheet height=\"600\">\n        <v-calendar\n          ref=\"calendar\"\n          v-model=\"value\"\n          color=\"black\"\n          type=\"week\"\n          :events=\"events\"\n          :event-color=\"getEventColor\"\n          :event-ripple=\"false\"\n          @change=\"getEvents\"\n          @mousedown:event=\"startDrag\"\n          @mousedown:time=\"startTime\"\n          @mousemove:time=\"mouseMove\"\n          @mouseup:time=\"endDrag\"\n          @mouseleave.native=\"cancelDrag\"\n        >\n          <template v-slot:event=\"{ event, timed, eventSummary }\">\n            <div\n              class=\"v-event-draggable\"\n              v-html=\"eventSummary()\"\n            ></div>\n            <div\n              v-if=\"timed\"\n              class=\"v-event-drag-bottom\"\n              @mousedown.stop=\"extendBottom(event)\"\n            ></div>\n          </template>\n        </v-calendar>\n      </v-sheet>\n    </v-col>\n  </v-row>\n</template>\n\n<script>\n  export default {\n    name: \"RoutineCalendar\",\n    data: () => ({\n      value: '',\n      events: [],\n      colors: ['#2196F3', '#3F51B5', '#673AB7', '#00BCD4', '#4CAF50', '#FF9800', '#757575'],\n      names: ['Meeting', 'Holiday', 'PTO', 'Travel', 'Event', 'Birthday', 'Conference', 'Party'],\n      dragEvent: null,\n      dragStart: null,\n      createEvent: null,\n      createStart: null,\n      extendOriginal: null,\n    }),\n    methods: {\n      startDrag ({ event, timed }) {\n        if (event && timed) {\n          this.dragEvent = event\n          this.dragTime = null\n          this.extendOriginal = null\n        }\n      },\n      startTime (tms) {\n        const mouse = this.toTime(tms)\n\n        if (this.dragEvent && this.dragTime === null) {\n          const start = this.dragEvent.start\n\n          this.dragTime = mouse - start\n        } else {\n          this.createStart = this.roundTime(mouse)\n          this.createEvent = {\n            name: `Event #${this.events.length}`,\n            color: this.rndElement(this.colors),\n            start: this.createStart,\n            end: this.createStart,\n            timed: true,\n          }\n\n          this.events.push(this.createEvent)\n        }\n      },\n      extendBottom (event) {\n        this.createEvent = event\n        this.createStart = event.start\n        this.extendOriginal = event.end\n      },\n      mouseMove (tms) {\n        const mouse = this.toTime(tms)\n\n        if (this.dragEvent && this.dragTime !== null) {\n          const start = this.dragEvent.start\n          const end = this.dragEvent.end\n          const duration = end - start\n          const newStartTime = mouse - this.dragTime\n          const newStart = this.roundTime(newStartTime)\n          const newEnd = newStart + duration\n\n          this.dragEvent.start = newStart\n          this.dragEvent.end = newEnd\n        } else if (this.createEvent && this.createStart !== null) {\n          const mouseRounded = this.roundTime(mouse, false)\n          const min = Math.min(mouseRounded, this.createStart)\n          const max = Math.max(mouseRounded, this.createStart)\n\n          this.createEvent.start = min\n          this.createEvent.end = max\n        }\n      },\n      endDrag () {\n        this.dragTime = null\n        this.dragEvent = null\n        this.createEvent = null\n        this.createStart = null\n        this.extendOriginal = null\n      },\n      cancelDrag () {\n        if (this.createEvent) {\n          if (this.extendOriginal) {\n            this.createEvent.end = this.extendOriginal\n          } else {\n            const i = this.events.indexOf(this.createEvent)\n            if (i !== -1) {\n              this.events.splice(i, 1)\n            }\n          }\n        }\n\n        this.createEvent = null\n        this.createStart = null\n        this.dragTime = null\n        this.dragEvent = null\n      },\n      roundTime (time, down = true) {\n        const roundTo = 15 // minutes\n        const roundDownTime = roundTo * 60 * 1000\n\n        return down\n          ? time - time % roundDownTime\n          : time + (roundDownTime - (time % roundDownTime))\n      },\n      toTime (tms) {\n        return new Date(tms.year, tms.month - 1, tms.day, tms.hour, tms.minute).getTime()\n      },\n      getEventColor (event) {\n        const rgb = parseInt(event.color.substring(1), 16)\n        const r = (rgb >> 16) & 0xFF\n        const g = (rgb >> 8) & 0xFF\n        const b = (rgb >> 0) & 0xFF\n\n        return event === this.dragEvent\n          ? `rgba(${r}, ${g}, ${b}, 0.7)`\n          : event === this.createEvent\n            ? `rgba(${r}, ${g}, ${b}, 0.7)`\n            : event.color\n      },\n      getEvents ({ start, end }) {\n        const events = []\n\n        const min = new Date(`${start.date}T00:00:00`).getTime()\n        const max = new Date(`${end.date}T23:59:59`).getTime()\n        const days = (max - min) / 86400000\n        const eventCount = this.rnd(days, days + 20)\n\n        for (let i = 0; i < eventCount; i++) {\n          const timed = this.rnd(0, 3) !== 0\n          const firstTimestamp = this.rnd(min, max)\n          const secondTimestamp = this.rnd(2, timed ? 8 : 288) * 900000\n          const start = firstTimestamp - (firstTimestamp % 900000)\n          const end = start + secondTimestamp\n\n          events.push({\n            name: this.rndElement(this.names),\n            color: this.rndElement(this.colors),\n            start,\n            end,\n            timed,\n          })\n        }\n\n        this.events = events\n      },\n      rnd (a, b) {\n        return Math.floor((b - a + 1) * Math.random()) + a\n      },\n      rndElement (arr) {\n        return arr[this.rnd(0, arr.length - 1)]\n      },\n    },\n  }\n</script>\n\n<style scoped lang=\"scss\">\n.v-event-draggable {\n  padding-left: 6px;\n}\n\n.v-event-timed {\n  user-select: none;\n  -webkit-user-select: none;\n}\n\n.v-event-drag-bottom {\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 4px;\n  height: 4px;\n  cursor: ns-resize;\n\n  &::after {\n    display: none;\n    position: absolute;\n    left: 50%;\n    height: 4px;\n    border-top: 1px solid white;\n    border-bottom: 1px solid white;\n    width: 16px;\n    margin-left: -8px;\n    opacity: 0.8;\n    content: '';\n  }\n\n  &:hover::after {\n    display: block;\n  }\n}\n</style>\nParty\n"]}]}
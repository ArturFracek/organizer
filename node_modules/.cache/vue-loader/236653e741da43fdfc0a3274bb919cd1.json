{"remainingRequest":"/home/artur/programowanie/organiser/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/artur/programowanie/organiser/client/src/components/TimeNet2.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/artur/programowanie/organiser/client/src/components/TimeNet2.vue","mtime":1637761712150},{"path":"/home/artur/programowanie/organiser/node_modules/cache-loader/dist/cjs.js","mtime":1638016032464},{"path":"/home/artur/programowanie/organiser/node_modules/babel-loader/lib/index.js","mtime":1638016034515},{"path":"/home/artur/programowanie/organiser/node_modules/cache-loader/dist/cjs.js","mtime":1638016032464},{"path":"/home/artur/programowanie/organiser/node_modules/vue-loader/lib/index.js","mtime":1638016035031}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEFjdGlvbnMsIG1hcEdldHRlcnMsIG1hcE11dGF0aW9ucyB9IGZyb20gInZ1ZXgiOwppbXBvcnQgbW9tZW50IGZyb20gIm1vbWVudCI7CmltcG9ydCB7IGhvdXJzIH0gZnJvbSAiLi4vY29uc3RhbnRzL2luZGV4IjsKaW1wb3J0IHsgbWludXRlcyB9IGZyb20gIi4uL2NvbnN0YW50cy9pbmRleCI7CmltcG9ydCB7IG1pbnV0ZXNEaXNwbGF5IH0gZnJvbSAiLi4vY29uc3RhbnRzL2luZGV4IjsKCm1vbWVudC51cGRhdGVMb2NhbGUoImVuIiwgewogIHdlZWs6IHsKICAgIGRvdzogMSwKICB9LAp9KTsKCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdG9nZ2xlZDogZmFsc2UsCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHdlZWtkYXlzOiAoKSA9PiBtb21lbnQud2Vla2RheXModHJ1ZSksCiAgICBob3VyczogKCkgPT4gaG91cnMsCiAgICBtaW51dGVzOiAoKSA9PiBtaW51dGVzLAogICAgbWludXRlc0Rpc3BsYXk6ICgpID0+IG1pbnV0ZXNEaXNwbGF5LAogICAgLi4ubWFwR2V0dGVycyh7CiAgICAgIGFjdGl2aXRpZXM6ICJhY3Rpdml0aWVzL2FjdGl2aXRpZXMiLAogICAgICByb3V0aW5lOiAicm91dGluZXMvYWN0aXZlUm91dGluZSIsCiAgICAgIGFjdGl2aXR5VGl0bGU6ICJ0aW1lci9hY3Rpdml0eVRpdGxlIiwKICAgICAgdGltZXJEaWZmOiAidGltZXIvdGltZXJEaWZmIiwKICAgIH0pLAogIH0sCiAgbWV0aG9kczogewogICAgLi4ubWFwTXV0YXRpb25zKHsKICAgICAgU1RBUlRfVElNRVI6ICJ0aW1lci9TVEFSVF9USU1FUiIsCiAgICB9KSwKICAgIC4uLm1hcEFjdGlvbnMoewogICAgICBzdG9wVGltZXJBbmRTYXZlOiAidGltZXIvc3RvcFRpbWVyQW5kU2F2ZSIsCiAgICB9KSwKICAgIGZvcm1hdFRpbWUodGltZU51bWJlcikgewogICAgICByZXR1cm4gbW9tZW50KHRpbWVOdW1iZXIsICJIIikuZm9ybWF0KCJIIGEiKTsKICAgIH0sCiAgICBnZXRBY3Rpdml0eU9jY3VyYW5jZShkYXlJbmRleCwgaG91ciwgdGVuTWludXRlcykgewogICAgICBpZiAoIXRoaXMucm91dGluZSkgcmV0dXJuICIiOwogICAgICBjb25zdCBvY2N1cmVuY2UgPSB0aGlzLnJvdXRpbmUuYWN0aXZpdGllc09jY3VyZW5jZXMuZmluZCgKICAgICAgICAoYSkgPT4KICAgICAgICAgIG1vbWVudChhLnN0YXJ0VGltZSwgIkhIOm1tIikgPD0KICAgICAgICAgICAgbW9tZW50KHsgaG91cjogaG91ciwgbWludXRlOiB0ZW5NaW51dGVzIH0pICYmCiAgICAgICAgICBtb21lbnQoYS5lbmRUaW1lLCAiSEg6bW0iKSA+CiAgICAgICAgICAgIG1vbWVudCh7IGhvdXI6IGhvdXIsIG1pbnV0ZTogdGVuTWludXRlcyB9KSAmJgogICAgICAgICAgYS5kYXlPZldlZWsgPT09IGRheUluZGV4CiAgICAgICk7CiAgICAgIHJldHVybiBvY2N1cmVuY2UgPyBvY2N1cmVuY2UuYWN0aXZpdHlJZCA6ICIiOwogICAgfSwKICAgIGdldEFjdGl2aXR5TmFtZShhY3Rpdml0eUlkKSB7CiAgICAgIGNvbnN0IGFjdGl2aXR5ID0gdGhpcy5hY3Rpdml0aWVzLmZpbmQoKGEpID0+IGEuX2lkID09PSBhY3Rpdml0eUlkKTsKICAgICAgcmV0dXJuIGFjdGl2aXR5ID8gYWN0aXZpdHkudGl0bGUgOiAiIjsKICAgIH0sCiAgICBob3VyVGltZUZvcm1hdChzZWNvbmRzKSB7CiAgICAgIGNvbnN0IGRpZmYgPSBtb21lbnQuZHVyYXRpb24oc2Vjb25kcywgInNlY29uZHMiKTsKICAgICAgY29uc3QgZGlmZkhvdXJzID0gTWF0aC5mbG9vcihkaWZmLmFzSG91cnMoKSk7CiAgICAgIGNvbnN0IGRpZmZIb3Vyc0Zvcm1hdHRlZCA9IGRpZmZIb3VycyA8IDEwID8gYDAke2RpZmZIb3Vyc31gIDogZGlmZkhvdXJzOwogICAgICBjb25zdCBtbXNzID0gbW9tZW50LnV0YyhkaWZmLmFzKCJtaWxsaXNlY29uZHMiKSkuZm9ybWF0KCJtbTpzcyIpOwogICAgICByZXR1cm4gYCR7ZGlmZkhvdXJzRm9ybWF0dGVkfToke21tc3N9YDsKICAgIH0sCiAgICB0aW1lck9uT2ZmKGFjdGl2aXR5SWQpIHsKICAgICAgaWYgKHRoaXMudG9nZ2xlZCA9PT0gZmFsc2UpIHsKICAgICAgICB0aGlzLnRvZ2dsZWQgPSB0cnVlOwogICAgICAgIHRoaXMuU1RBUlRfVElNRVIoewogICAgICAgICAgYWN0aXZpdHlJZCwKICAgICAgICAgIG5hbWU6IHRoaXMuZ2V0QWN0aXZpdHlOYW1lKGFjdGl2aXR5SWQpLAogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMudG9nZ2xlZCA9IGZhbHNlOwogICAgICAgIHRoaXMuc3RvcFRpbWVyQW5kU2F2ZSgpOwogICAgICB9CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["TimeNet2.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0FA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TimeNet2.vue","sourceRoot":"client/src/components","sourcesContent":["<template>\n  <div class=\"net__container\">\n    <div\n      class=\"net__activityTimeDisplay\"\n      :class=\"{ net__activityTimeDisplayActive: toggled === true }\"\n      data-test=\"netTimeDisplay\"\n    >\n      {{ this.toggled !== true ? \"\" : activityTitle }}\n      {{\n        hourTimeFormat(timerDiff) !== \"00:00:00\"\n          ? hourTimeFormat(timerDiff)\n          : \"Select Activity Below\"\n      }}\n    </div>\n    <table class=\"net__table\">\n      <thead>\n        <tr>\n          <th class=\"net__emptyCell\"><div class=\"net__emptyDiv\"></div></th>\n          <th\n            v-for=\"(day, dayIndex) in weekdays\"\n            :key=\"dayIndex\"\n            :class=\"[\n              'net__cell',\n              'net__dayHeader',\n              `net__dayHeader-${dayIndex}`,\n            ]\"\n          >\n            {{ day }}\n          </th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"(hour, hourIndex) in hours\" :key=\"hourIndex\">\n          <td class=\"net__hour\">\n            {{ formatTime(hour) }}\n\n            <tr\n              class=\"net__minutes\"\n              v-for=\"(minuteDisplay, minuteIndex) in minutesDisplay\"\n              :key=\"minuteIndex\"\n            >\n              {{\n                minuteDisplay.toString()\n              }}\n            </tr>\n          </td>\n          <td\n            v-for=\"(day, dayIndex) in weekdays\"\n            :key=\"dayIndex\"\n            :class=\"[\n              'net__cell',\n              'net__hourInDay',\n              `net__day-${dayIndex}`,\n              `net__day-${dayIndex}-${hour}`,\n            ]\"\n          >\n            <div\n              v-for=\"(tenMinutes, minutesIndex) in minutes\"\n              :key=\"minutesIndex\"\n              :class=\"{\n                net__minutesRow: true,\n                'net__minutesRow--exist': getActivityOccurance(\n                  dayIndex,\n                  hour,\n                  tenMinutes\n                ),\n              }\"\n              :data-test=\"[`${day}-${hour}-${tenMinutes}`]\"\n            >\n              <button\n                class=\"net__timerButton\"\n                @click=\"\n                  timerOnOff(getActivityOccurance(dayIndex, hour, tenMinutes))\n                \"\n              >\n                {{\n                  getActivityName(\n                    getActivityOccurance(dayIndex, hour, tenMinutes)\n                  )\n                }}\n              </button>\n            </div>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</template>\n\n<script>\nimport { mapActions, mapGetters, mapMutations } from \"vuex\";\nimport moment from \"moment\";\nimport { hours } from \"../constants/index\";\nimport { minutes } from \"../constants/index\";\nimport { minutesDisplay } from \"../constants/index\";\n\nmoment.updateLocale(\"en\", {\n  week: {\n    dow: 1,\n  },\n});\n\nexport default {\n  data() {\n    return {\n      toggled: false,\n    };\n  },\n  computed: {\n    weekdays: () => moment.weekdays(true),\n    hours: () => hours,\n    minutes: () => minutes,\n    minutesDisplay: () => minutesDisplay,\n    ...mapGetters({\n      activities: \"activities/activities\",\n      routine: \"routines/activeRoutine\",\n      activityTitle: \"timer/activityTitle\",\n      timerDiff: \"timer/timerDiff\",\n    }),\n  },\n  methods: {\n    ...mapMutations({\n      START_TIMER: \"timer/START_TIMER\",\n    }),\n    ...mapActions({\n      stopTimerAndSave: \"timer/stopTimerAndSave\",\n    }),\n    formatTime(timeNumber) {\n      return moment(timeNumber, \"H\").format(\"H a\");\n    },\n    getActivityOccurance(dayIndex, hour, tenMinutes) {\n      if (!this.routine) return \"\";\n      const occurence = this.routine.activitiesOccurences.find(\n        (a) =>\n          moment(a.startTime, \"HH:mm\") <=\n            moment({ hour: hour, minute: tenMinutes }) &&\n          moment(a.endTime, \"HH:mm\") >\n            moment({ hour: hour, minute: tenMinutes }) &&\n          a.dayOfWeek === dayIndex\n      );\n      return occurence ? occurence.activityId : \"\";\n    },\n    getActivityName(activityId) {\n      const activity = this.activities.find((a) => a._id === activityId);\n      return activity ? activity.title : \"\";\n    },\n    hourTimeFormat(seconds) {\n      const diff = moment.duration(seconds, \"seconds\");\n      const diffHours = Math.floor(diff.asHours());\n      const diffHoursFormatted = diffHours < 10 ? `0${diffHours}` : diffHours;\n      const mmss = moment.utc(diff.as(\"milliseconds\")).format(\"mm:ss\");\n      return `${diffHoursFormatted}:${mmss}`;\n    },\n    timerOnOff(activityId) {\n      if (this.toggled === false) {\n        this.toggled = true;\n        this.START_TIMER({\n          activityId,\n          name: this.getActivityName(activityId),\n        });\n      } else {\n        this.toggled = false;\n        this.stopTimerAndSave();\n      }\n    },\n  },\n};\n</script>\n\n<style>\n.net__container {\n  transition: 1s;\n}\n.net__table {\n  width: 100%;\n  table-layout: fixed;\n  border-spacing: 0px;\n}\n\n.net__emptyCell {\n  width: 3rem;\n}\n\n.net__dayHeader {\n  color: rgb(255, 255, 255);\n  text-shadow: 2px 2px 1px rgb(6, 10, 255);\n  justify-content: center;\n  align-items: center;\n  font-weight: bold;\n  backdrop-filter: blur(10px) drop-shadow(4px 4px 20px rgb(10, 194, 207));\n  border: 0.1px solid turquoise;\n  border-radius: 0.4rem;\n}\n\n.net__hour {\n  display: flex;\n  flex-flow: column;\n  color: white;\n  font-size: 0.9rem;\n  font-weight: 500;\n  text-shadow: 2px 2px 10px rgb(255, 255, 255);\n  border-bottom: 1px dashed turquoise;\n  white-space: nowrap;\n  min-width: 20px;\n}\n\n.net__hourRow--exist ~ .net__hourRow--exist {\n  display: none;\n}\n\n.net__minutes {\n  position: relative;\n  top: -1px;\n  display: flex;\n  flex-flow: column;\n  align-items: flex-end;\n  font-size: 11px;\n  margin-right: 5px;\n  font-weight: 500;\n  opacity: 0.8;\n}\n\n.net__hourInDay {\n  text-align: center;\n  border: 0.1px solid turquoise;\n  border-radius: 0.4rem;\n}\n\n.net__cell {\n  padding: 0rem;\n  margin: 0;\n  white-space: nowrap;\n  height: 2rem;\n}\n\n.net__minutesRow {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 18px;\n  font-weight: bold;\n  margin: 0;\n  padding: 0;\n  border-bottom: 1px dotted rgba(87, 246, 185, 0.3);\n  letter-spacing: 0px;\n  text-size-adjust: auto;\n}\n\n.net__minutesRow--exist {\n  font-size: 13px;\n  text-shadow: 2px 1px 1px rgb(56, 53, 241);\n  color: rgb(255, 255, 255);\n  border-left: 1px solid aquamarine;\n  border-top: 1px solid aquamarine;\n  border-right: 1px solid aquamarine;\n  border-bottom: 1px solid aquamarine;\n  width: 93%;\n  border-radius: 3px;\n  margin-left: auto;\n  margin-right: auto;\n  box-shadow: 0px 0px 10px rgb(116, 255, 220, 0.5);\n}\n\n.net__minutesRow--exist ~ .net__minutesRow--exist {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  text-align: center;\n  font-size: 12px;\n  color: rgba(106, 246, 200, 0);\n  border-top: none;\n  border-bottom: 0.5px dotted rgba(87, 246, 185, 0.2);\n  border-right: none;\n  border-left: none;\n  box-shadow: none;\n  transition: 0.3s;\n}\n\n.net__timerButton {\n  display: flex;\n  justify-content: center;\n  z-index: 3;\n  width: 100%;\n  text-shadow: 0 0 2px rgba(130, 251, 211, 0.8);\n  transition: 0.3s;\n}\n.net__timerButton:hover {\n  color: rgb(255, 0, 0);\n  text-shadow: 0 0 7px rgb(255, 0, 0);\n}\n.net__activityTimeDisplay {\n  position: relative;\n  font-size: 1.2rem;\n  left: 1%;\n  margin-left: auto;\n  margin-right: auto;\n  height: 3rem;\n  width: 40%;\n  color: rgb(255, 255, 255);\n  font-weight: bold;\n  border-left: 15px double rgba(41, 246, 212, 0.157);\n  border-right: 15px double rgba(41, 246, 212, 0.157);\n  border-top: 2px double rgba(41, 246, 212, 0.157);\n  border-bottom: 2px double rgba(41, 246, 212, 0.157);\n  border-radius: 5px;\n  border-style: groove;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  transition: 0.8s ease-out;\n}\n\n.net__activityTimeDisplayActive {\n  color: rgb(68, 255, 193);\n  transition: 0.8s ease-out;\n}\n/* ////////////////////////////// */\n@media (max-width: 765px) {\n  .net__activityTimeDisplay {\n    width: 80%;\n    font-size: 1rem;\n  }\n  .net__hour {\n    width: 1rem;\n    font-size: 0.7rem;\n  }\n  .net__emptyCell {\n    width: 1.7rem;\n  }\n  .net__minutesRow {\n    overflow: hidden;\n  }\n  .net__dayHeader {\n    font-size: 0.8rem;\n  }\n}\n</style>\n"]}]}
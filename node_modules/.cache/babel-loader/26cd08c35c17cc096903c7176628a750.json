{"remainingRequest":"/home/artur/programowanie/organiser/node_modules/babel-loader/lib/index.js!/home/artur/programowanie/organiser/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/artur/programowanie/organiser/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/artur/programowanie/organiser/client/src/components/TimeStatistics.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/artur/programowanie/organiser/client/src/components/TimeStatistics.vue","mtime":1638136165837},{"path":"/home/artur/programowanie/organiser/node_modules/cache-loader/dist/cjs.js","mtime":1638016032464},{"path":"/home/artur/programowanie/organiser/node_modules/babel-loader/lib/index.js","mtime":1638016034515},{"path":"/home/artur/programowanie/organiser/node_modules/cache-loader/dist/cjs.js","mtime":1638016032464},{"path":"/home/artur/programowanie/organiser/node_modules/vue-loader/lib/index.js","mtime":1638016035031}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgbWFwQWN0aW9ucywgbWFwR2V0dGVycyB9IGZyb20gInZ1ZXgiOwppbXBvcnQgbW9tZW50IGZyb20gIm1vbWVudCI7CmV4cG9ydCBkZWZhdWx0IHsKICBtb3VudGVkKCkgewogICAgdGhpcy5mZXRjaFJvdXRpbmVzKCksIHRoaXMuZmV0Y2hBY3Rpdml0aWVzKCk7CiAgfSwKCiAgY29tcHV0ZWQ6IHsgLi4ubWFwR2V0dGVycyh7CiAgICAgIGFjdGl2aXRpZXM6ICJhY3Rpdml0aWVzL2FjdGl2aXRpZXMiLAogICAgICBhY3RpdmVSb3V0aW5lOiAicm91dGluZXMvYWN0aXZlUm91dGluZSIsCiAgICAgIHRpbWVyRGlmZjogInRpbWVyL3RpbWVyRGlmZiIKICAgIH0pCiAgfSwKICBtZXRob2RzOiB7IC4uLm1hcEFjdGlvbnMoewogICAgICBmZXRjaEFsbEFjdGl2aXRpZXM6ICJhY3Rpdml0aWVzL2ZldGNoQWxsQWN0aXZpdGllcyIsCiAgICAgIGZldGNoQWxsUm91dGluZXM6ICJyb3V0aW5lcy9mZXRjaEFsbFJvdXRpbmVzIgogICAgfSksCgogICAgYXN5bmMgZmV0Y2hSb3V0aW5lcygpIHsKICAgICAgYXdhaXQgdGhpcy5mZXRjaEFsbFJvdXRpbmVzKCk7CiAgICB9LAoKICAgIGFzeW5jIGZldGNoQWN0aXZpdGllcygpIHsKICAgICAgYXdhaXQgdGhpcy5mZXRjaEFsbEFjdGl2aXRpZXMoKTsKICAgIH0sCgogICAgZ2V0QWN0aXZpdHlOYW1lQnlJZChvY2N1cmVuY2UpIHsKICAgICAgY29uc3QgdW5pcXVlQWN0aXZpdGllcyA9IHRoaXMuZ2V0VW5pcXVlQWNpdGl2aXRlcygpOwogICAgICBjb25zdCBhY3Rpdml0eSA9IHVuaXF1ZUFjdGl2aXRpZXMuZmluZChhID0+IGEuX2lkID09PSBvY2N1cmVuY2UuYWN0aXZpdHlJZCk7CiAgICAgIHJldHVybiBhY3Rpdml0eSA/IGFjdGl2aXR5LnRpdGxlIDogIiI7CiAgICB9LAoKICAgIGdldEFjdGl2aXR5RHVyYXRpb25CeUlkKG9jY3VyZW5jZSkgewogICAgICBjb25zdCB1bmlxdWVBY3Rpdml0aWVzID0gdGhpcy5nZXRVbmlxdWVBY2l0aXZpdGVzKCk7CiAgICAgIGNvbnN0IGFjdGl2aXR5ID0gdW5pcXVlQWN0aXZpdGllcy5maW5kKGEgPT4gYS5faWQgPT09IG9jY3VyZW5jZS5hY3Rpdml0eUlkKTsKICAgICAgcmV0dXJuIGFjdGl2aXR5ID8gYWN0aXZpdHkuZHVyYXRpb24gOiAiIjsKICAgIH0sCgogICAgZ2V0VW5pcXVlT2NjdXJlbmNlc0lkcygpIHsKICAgICAgY29uc3Qgb2NjdXJlbmNlcyA9IHRoaXMuYWN0aXZlUm91dGluZS5hY3Rpdml0aWVzT2NjdXJlbmNlczsKICAgICAgY29uc3QgdW5pcXVlT2NjdXJlbmNlc0lkcyA9IFsuLi5uZXcgU2V0KG9jY3VyZW5jZXMubWFwKG8gPT4gby5hY3Rpdml0eUlkKSldOwogICAgICByZXR1cm4gdW5pcXVlT2NjdXJlbmNlc0lkczsKICAgIH0sCgogICAgZ2V0VW5pcXVlQWNpdGl2aXRlcygpIHsKICAgICAgY29uc3QgdW5pcXVlT2NjdXJlbmNlc0lkcyA9IHRoaXMuZ2V0VW5pcXVlT2NjdXJlbmNlc0lkcygpOwogICAgICBjb25zdCB1bmlxdWVBY3Rpdml0aWVzID0gdGhpcy5hY3Rpdml0aWVzLmZpbHRlcihhID0+IHVuaXF1ZU9jY3VyZW5jZXNJZHMuaW5jbHVkZXMoYS5faWQpKTsKICAgICAgcmV0dXJuIHVuaXF1ZUFjdGl2aXRpZXM7CiAgICB9LAoKICAgIGdldFVuaXF1ZU9jY3VyZW5jZXMoKSB7CiAgICAgIGNvbnN0IG9jY3VyZW5jZXMgPSB0aGlzLmFjdGl2ZVJvdXRpbmUuYWN0aXZpdGllc09jY3VyZW5jZXM7CiAgICAgIGNvbnN0IHVuaXF1ZU9jY3VyZW5jZXMgPSBbLi4ubmV3IE1hcChvY2N1cmVuY2VzLm1hcChvID0+IFtvLmFjdGl2aXR5SWQsIG9dKSkudmFsdWVzKCldOwogICAgICByZXR1cm4gdW5pcXVlT2NjdXJlbmNlczsKICAgIH0sCgogICAgaG91clRpbWVGb3JtYXQoc2Vjb25kcykgewogICAgICBjb25zdCBkaWZmID0gbW9tZW50LmR1cmF0aW9uKHNlY29uZHMsICJzZWNvbmRzIik7CiAgICAgIGNvbnN0IGRpZmZIb3VycyA9IE1hdGguZmxvb3IoZGlmZi5hc0hvdXJzKCkpOwogICAgICBjb25zdCBkaWZmSG91cnNGb3JtYXR0ZWQgPSBkaWZmSG91cnMgPCAxMCA/IGAwJHtkaWZmSG91cnN9YCA6IGRpZmZIb3VyczsKICAgICAgY29uc3QgbW1zcyA9IG1vbWVudC51dGMoZGlmZi5hcygibWlsbGlzZWNvbmRzIikpLmZvcm1hdCgibW06c3MiKTsKICAgICAgcmV0dXJuIGAke2RpZmZIb3Vyc0Zvcm1hdHRlZH06JHttbXNzfWA7CiAgICB9LAoKICAgIHRlc3Qob2NjdXJlbmNlKSB7CiAgICAgIGNvbnNvbGUubG9nKG9jY3VyZW5jZS5hY3Rpdml0eUlkKTsKICAgIH0KCiAgfQp9Ow=="},{"version":3,"sources":["TimeStatistics.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"TimeStatistics__container\">\n    <div\n      class=\"TimeStatistics__container__title\"\n      data-test=\"timeStatisticsTitle\"\n    >\n      Time Statistics<i class=\"bi bi-clock-history\"></i>\n    </div>\n    <div v-if=\"activeRoutine\" class=\"TimeStatistics__activitiesContainer\">\n      <div\n        class=\"TimeStatistics__statistic\"\n        v-for=\"(occurence, index) in getUniqueOccurences()\"\n        :key=\"index\"\n        data-test=\"activityTitleTimeStatistic\"\n      >\n        {{ getActivityNameById(occurence) }} {{ \"~\" }}\n        <div\n          class=\"TimeStatistics__activityDuration\"\n          data-test=\"activityDuration\"\n        >\n          {{ hourTimeFormat(getActivityDurationById(occurence)) || 0 }}\n        </div>\n      </div>\n    </div>\n    <button type=\"button\" @click=\"getUniqueOccurences\">DUPA</button>\n  </div>\n</template>\n\n<script>\nimport { mapActions, mapGetters } from \"vuex\";\nimport moment from \"moment\";\n\nexport default {\n  mounted() {\n    this.fetchRoutines(), this.fetchActivities();\n  },\n  computed: {\n    ...mapGetters({\n      activities: \"activities/activities\",\n      activeRoutine: \"routines/activeRoutine\",\n      timerDiff: \"timer/timerDiff\",\n    }),\n  },\n  methods: {\n    ...mapActions({\n      fetchAllActivities: \"activities/fetchAllActivities\",\n      fetchAllRoutines: \"routines/fetchAllRoutines\",\n    }),\n    async fetchRoutines() {\n      await this.fetchAllRoutines();\n    },\n    async fetchActivities() {\n      await this.fetchAllActivities();\n    },\n    getActivityNameById(occurence) {\n      const uniqueActivities = this.getUniqueAcitivites();\n      const activity = uniqueActivities.find(\n        (a) => a._id === occurence.activityId\n      );\n      return activity ? activity.title : \"\";\n    },\n    getActivityDurationById(occurence) {\n      const uniqueActivities = this.getUniqueAcitivites();\n      const activity = uniqueActivities.find(\n        (a) => a._id === occurence.activityId\n      );\n      return activity ? activity.duration : \"\";\n    },\n    getUniqueOccurencesIds() {\n      const occurences = this.activeRoutine.activitiesOccurences;\n      const uniqueOccurencesIds = [\n        ...new Set(occurences.map((o) => o.activityId)),\n      ];\n      return uniqueOccurencesIds;\n    },\n    getUniqueAcitivites() {\n      const uniqueOccurencesIds = this.getUniqueOccurencesIds();\n      const uniqueActivities = this.activities.filter((a) =>\n        uniqueOccurencesIds.includes(a._id)\n      );\n      return uniqueActivities;\n    },\n    getUniqueOccurences() {\n      const occurences = this.activeRoutine.activitiesOccurences;\n      const uniqueOccurences = [\n        ...new Map(occurences.map((o) => [o.activityId, o])).values(),\n      ];\n      return uniqueOccurences;\n    },\n    hourTimeFormat(seconds) {\n      const diff = moment.duration(seconds, \"seconds\");\n      const diffHours = Math.floor(diff.asHours());\n      const diffHoursFormatted = diffHours < 10 ? `0${diffHours}` : diffHours;\n      const mmss = moment.utc(diff.as(\"milliseconds\")).format(\"mm:ss\");\n      return `${diffHoursFormatted}:${mmss}`;\n    },\n    test(occurence) {\n      console.log(occurence.activityId);\n    },\n  },\n};\n</script>\n\n<style scoped>\n.TimeStatistics__container {\n  display: flex;\n  flex-flow: column;\n  align-items: center;\n  height: 30%;\n  max-height: 60%;\n  width: 80%;\n  position: relative;\n  padding: 0.3rem 2rem;\n  border-style: solid;\n  border-width: 2px;\n  border-image: linear-gradient(\n      to bottom,\n      rgb(164, 253, 249),\n      rgb(250, 127, 127)\n    )\n    1;\n  border-image-repeat: stretch;\n  backdrop-filter: drop-shadow(4px 4px 6px rgb(207, 17, 17)) hue-rotate(180deg)\n    opacity(80%);\n  margin-bottom: 2rem;\n  overflow-y: scroll;\n  overflow-x: hidden;\n}\n\n.TimeStatistics__container__title {\n  font-size: 1.2rem;\n  font-weight: bold;\n  color: rgb(255, 255, 255);\n  letter-spacing: 1px;\n  text-shadow: 0 0 10px rgb(255, 255, 255);\n  cursor: unset;\n  justify-self: center;\n}\ni {\n  position: relative;\n  left: 0.6rem;\n  color: white;\n  text-shadow: 0 0 4px white;\n}\n.TimeStatistics__activitiesContainer {\n  width: 100%;\n  height: 90%;\n  display: flex;\n  flex-flow: column;\n  flex-wrap: wrap;\n  align-content: space-around;\n  padding-bottom: 0.4rem;\n  box-sizing: content-box;\n  min-width: 40rem;\n}\n\n.TimeStatistics__statistic {\n  display: flex;\n  margin: 2px;\n  color: rgb(7, 223, 151);\n  font-size: 1rem;\n  font-weight: bold;\n  text-shadow: 2px 0 2px rgb(1, 8, 114);\n}\n.TimeStatistics__statistic:hover {\n  font-weight: bold;\n  color: rgb(81, 255, 255);\n}\n\n.TimeStatistics__activityDuration {\n  margin-left: 10px;\n}\n\n@media (max-width: 765px) {\n  .TimeStatistics__container {\n    width: 100%;\n    overflow-y: scroll;\n    overflow-x: hidden;\n  }\n  .TimeStatistics__activitiesContainer {\n    display: flex;\n    flex-flow: column;\n    align-items: center;\n    flex-wrap: nowrap;\n  }\n  .TimeStatistics__statistic {\n    font-size: 0.9rem;\n  }\n}\n</style>\n"],"sourceRoot":"client/src/components"}]}
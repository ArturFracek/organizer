{"remainingRequest":"/home/artur/programowanie/organiser/node_modules/babel-loader/lib/index.js!/home/artur/programowanie/organiser/node_modules/eslint-loader/index.js??ref--13-0!/home/artur/programowanie/organiser/client/src/Warehouse/Auth.js","dependencies":[{"path":"/home/artur/programowanie/organiser/client/src/Warehouse/Auth.js","mtime":1637935465411},{"path":"/home/artur/programowanie/organiser/node_modules/cache-loader/dist/cjs.js","mtime":1638016032464},{"path":"/home/artur/programowanie/organiser/node_modules/babel-loader/lib/index.js","mtime":1638016034515},{"path":"/home/artur/programowanie/organiser/node_modules/eslint-loader/index.js","mtime":1638016032640}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGFwaSBmcm9tICJAL2FwaSI7CmltcG9ydCByb3V0ZXIgZnJvbSAiLi4vcm91dGVyL2luZGV4IjsKY29uc3Qgc3RhdGUgPSB7CiAgdG9rZW46IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ0b2tlbiIpIHx8ICIiLAogIHVzZXI6IHt9LAogIHN0YXR1czogIiIsCiAgZXJyb3I6IG51bGwKfTsKY29uc3QgZ2V0dGVycyA9IHsKICBpc0xvZ2dlZEluOiBzdGF0ZSA9PiAhIXN0YXRlLnRva2VuLAogIGF1dGhTdGF0ZTogc3RhdGUgPT4gc3RhdGUuc3RhdHVzLAogIHVzZXI6IHN0YXRlID0+IHN0YXRlLnVzZXIsCiAgZXJyb3I6IHN0YXRlID0+IHN0YXRlLmVycm9yCn07CmNvbnN0IGFjdGlvbnMgPSB7CiAgLy9Mb2dpbiBhY3Rpb24KICBhc3luYyBsb2dpbih7CiAgICBjb21taXQKICB9LCB1c2VyKSB7CiAgICBjb21taXQoImF1dGhfcmVxdWVzdCIpOwoKICAgIHRyeSB7CiAgICAgIGxldCByZXMgPSBhd2FpdCBhcGkucG9zdCgiL3VzZXJzL2xvZ2luIiwgdXNlcik7CgogICAgICBpZiAocmVzLmRhdGEuc3VjY2VzcykgewogICAgICAgIGNvbnN0IHRva2VuID0gcmVzLmRhdGEudG9rZW47CiAgICAgICAgY29uc3QgdXNlciA9IHJlcy5kYXRhLnVzZXI7IC8vU3RvcmUgdGhlIHRva2VuIGludG8gdGhlIGxvY2FsIHN0b3JhZ2UKCiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oInRva2VuIiwgdG9rZW4pOyAvL3NldCB0aGUgYXhpb3MgZGVmYXVsdHMKCiAgICAgICAgYXBpLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWyJBdXRob3JpemF0aW9uIl0gPSB0b2tlbjsKICAgICAgICBjb21taXQoImF1dGhfc3VjY2VzcyIsIHRva2VuLCB1c2VyKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHJlczsKICAgIH0gY2F0Y2ggKGVycikgewogICAgICBjb21taXQoImF1dGhfZXJyb3IiLCBlcnIpOwogICAgfQogIH0sCgogIC8vUmVnaXN0ZXIgdXNlcgogIGFzeW5jIHJlZ2lzdGVyKHsKICAgIGNvbW1pdAogIH0sIHVzZXJEYXRhKSB7CiAgICB0cnkgewogICAgICBjb21taXQoInJlZ2lzdGVyX3JlcXVlc3QiKTsKICAgICAgbGV0IHJlcyA9IGF3YWl0IGFwaS5wb3N0KCIvdXNlcnMvcmVnaXN0ZXIiLCB1c2VyRGF0YSk7CgogICAgICBpZiAocmVzLmRhdGEuc3VjY2VzcyAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgY29tbWl0KCJyZWdpc3Rlcl9zdWNjZXNzIik7CiAgICAgIH0KCiAgICAgIHJldHVybiByZXM7CiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgY29tbWl0KCJyZWdpc3Rlcl9lcnJvciIsIGVycik7CiAgICB9CiAgfSwKCiAgLy9HZXQgdGhlIHVzZXIgcHJvZmlsZQogIGFzeW5jIGdldFByb2ZpbGUoewogICAgY29tbWl0CiAgfSkgewogICAgY29tbWl0KCJwcm9maWxlX3JlcXVlc3QiKTsKICAgIGxldCByZXMgPSBhd2FpdCBhcGkuZ2V0KCIvdXNlcnMvcHJvZmlsZSIpOwogICAgY29tbWl0KCJ1c2VyX3Byb2ZpbGUiLCByZXMuZGF0YS51c2VyKTsKICAgIHJldHVybiByZXM7CiAgfSwKCiAgLy9Mb2dvdXQgdGhlIHVzZXIKICBhc3luYyBsb2dvdXQoewogICAgY29tbWl0CiAgfSkgewogICAgYXdhaXQgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oInRva2VuIik7CiAgICBjb21taXQoImxvZ291dCIpOwogICAgZGVsZXRlIGFwaS5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsiQXV0aG9yaXphdGlvbiJdOwogICAgcm91dGVyLnB1c2goIi9Mb2dpbiIpOwogICAgcmV0dXJuOwogIH0KCn07CmNvbnN0IG11dGF0aW9ucyA9IHsKICBhdXRoX3JlcXVlc3Qoc3RhdGUpIHsKICAgIHN0YXRlLmVycm9yID0gbnVsbDsKICAgIHN0YXRlLnN0YXR1cyA9ICJsb2FkaW5nIjsKICB9LAoKICBhdXRoX3N1Y2Nlc3Moc3RhdGUsIHRva2VuLCB1c2VyKSB7CiAgICBzdGF0ZS50b2tlbiA9IHRva2VuOwogICAgc3RhdGUudXNlciA9IHVzZXI7CiAgICBzdGF0ZS5zdGF0dXMgPSAic3VjY2VzcyI7CiAgICBzdGF0ZS5lcnJvciA9IG51bGw7CiAgfSwKCiAgYXV0aF9lcnJvcihzdGF0ZSwgZXJyKSB7CiAgICBzdGF0ZS5lcnJvciA9IGVyci5yZXNwb25zZS5kYXRhLm1zZzsKICB9LAoKICByZWdpc3Rlcl9yZXF1ZXN0KHN0YXRlKSB7CiAgICBzdGF0ZS5lcnJvciA9IG51bGw7CiAgICBzdGF0ZS5zdGF0dXMgPSAibG9hZGluZyI7CiAgfSwKCiAgcmVnaXN0ZXJfc3VjY2VzcyhzdGF0ZSkgewogICAgc3RhdGUuZXJyb3IgPSBudWxsOwogICAgc3RhdGUuc3RhdHVzID0gInN1Y2Nlc3MiOwogIH0sCgogIHJlZ2lzdGVyX2Vycm9yKHN0YXRlLCBlcnIpIHsKICAgIGNvbnNvbGUubG9nKHsKICAgICAgZXJyCiAgICB9KTsKICAgIHN0YXRlLmVycm9yID0gZXJyLnJlc3BvbnNlLmRhdGEubXNnOwogIH0sCgogIGxvZ291dChzdGF0ZSkgewogICAgc3RhdGUuZXJyb3IgPSBudWxsOwogICAgc3RhdGUuc3RhdHVzID0gIiI7CiAgICBzdGF0ZS50b2tlbiA9ICIiOwogICAgc3RhdGUudXNlciA9ICIiOwogIH0sCgogIHByb2ZpbGVfcmVxdWVzdChzdGF0ZSkgewogICAgc3RhdGUuc3RhdHVzID0gImxvYWRpbmciOwogIH0sCgogIHVzZXJfcHJvZmlsZShzdGF0ZSwgdXNlcikgewogICAgc3RhdGUudXNlciA9IHVzZXI7CiAgfQoKfTsKZXhwb3J0IGRlZmF1bHQgewogIHN0YXRlLAogIGdldHRlcnMsCiAgYWN0aW9ucywKICBtdXRhdGlvbnMKfTs="},{"version":3,"sources":["/home/artur/programowanie/organiser/client/src/Warehouse/Auth.js"],"names":["api","router","state","token","localStorage","getItem","user","status","error","getters","isLoggedIn","authState","actions","login","commit","res","post","data","success","setItem","defaults","headers","common","err","register","userData","undefined","getProfile","get","logout","removeItem","push","mutations","auth_request","auth_success","auth_error","response","msg","register_request","register_success","register_error","console","log","profile_request","user_profile"],"mappings":"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","sourcesContent":["import api from \"@/api\";\nimport router from \"../router/index\";\n\nconst state = {\n  token: localStorage.getItem(\"token\") || \"\",\n  user: {},\n  status: \"\",\n  error: null,\n};\n\nconst getters = {\n  isLoggedIn: (state) => !!state.token,\n  authState: (state) => state.status,\n  user: (state) => state.user,\n  error: (state) => state.error,\n};\n\nconst actions = {\n  //Login action\n  async login({ commit }, user) {\n    commit(\"auth_request\");\n    try {\n      let res = await api.post(\"/users/login\", user);\n      if (res.data.success) {\n        const token = res.data.token;\n        const user = res.data.user;\n        //Store the token into the local storage\n        localStorage.setItem(\"token\", token);\n        //set the axios defaults\n        api.defaults.headers.common[\"Authorization\"] = token;\n        commit(\"auth_success\", token, user);\n      }\n      return res;\n    } catch (err) {\n      commit(\"auth_error\", err);\n    }\n  },\n  //Register user\n  async register({ commit }, userData) {\n    try {\n      commit(\"register_request\");\n      let res = await api.post(\"/users/register\", userData);\n      if (res.data.success !== undefined) {\n        commit(\"register_success\");\n      }\n      return res;\n    } catch (err) {\n      commit(\"register_error\", err);\n    }\n  },\n  //Get the user profile\n  async getProfile({ commit }) {\n    commit(\"profile_request\");\n    let res = await api.get(\"/users/profile\");\n    commit(\"user_profile\", res.data.user);\n    return res;\n  },\n\n  //Logout the user\n  async logout({ commit }) {\n    await localStorage.removeItem(\"token\");\n    commit(\"logout\");\n    delete api.defaults.headers.common[\"Authorization\"];\n    router.push(\"/Login\");\n    return;\n  },\n};\n\nconst mutations = {\n  auth_request(state) {\n    state.error = null;\n    state.status = \"loading\";\n  },\n  auth_success(state, token, user) {\n    state.token = token;\n    state.user = user;\n    state.status = \"success\";\n    state.error = null;\n  },\n  auth_error(state, err) {\n    state.error = err.response.data.msg;\n  },\n  register_request(state) {\n    state.error = null;\n    state.status = \"loading\";\n  },\n  register_success(state) {\n    state.error = null;\n    state.status = \"success\";\n  },\n  register_error(state, err) {\n    console.log({ err });\n    state.error = err.response.data.msg;\n  },\n  logout(state) {\n    state.error = null;\n    state.status = \"\";\n    state.token = \"\";\n    state.user = \"\";\n  },\n  profile_request(state) {\n    state.status = \"loading\";\n  },\n  user_profile(state, user) {\n    state.user = user;\n  },\n};\n\nexport default {\n  state,\n  getters,\n  actions,\n  mutations,\n};\n"]}]}
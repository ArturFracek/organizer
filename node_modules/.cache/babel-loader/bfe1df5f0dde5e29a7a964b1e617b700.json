{"remainingRequest":"/home/artur/programowanie/organiser/node_modules/babel-loader/lib/index.js!/home/artur/programowanie/organiser/node_modules/eslint-loader/index.js??ref--13-0!/home/artur/programowanie/organiser/client/src/store/modules/timer.js","dependencies":[{"path":"/home/artur/programowanie/organiser/client/src/store/modules/timer.js","mtime":1637761712154},{"path":"/home/artur/programowanie/organiser/node_modules/cache-loader/dist/cjs.js","mtime":1638016032464},{"path":"/home/artur/programowanie/organiser/node_modules/babel-loader/lib/index.js","mtime":1638016034515},{"path":"/home/artur/programowanie/organiser/node_modules/eslint-loader/index.js","mtime":1638016032640}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZXhwb3J0IGRlZmF1bHQgewogIG5hbWVzcGFjZWQ6IHRydWUsCiAgc3RhdGU6ICgpID0+ICh7CiAgICBjdXJyZW50VGltZTogbnVsbCwKICAgIHRpbWVyU3RhdGU6ICJzdG9wcGVkIiwKICAgIHRpbWVyU3RhcnRlZEF0OiBudWxsLAogICAgdGltZXJBY3Rpdml0eUlkOiAiIiwKICAgIHRpbWVyQWN0aXZpdHlOYW1lOiAiIgogIH0pLAogIG11dGF0aW9uczogewogICAgU0VUX0NVUlJFTlRfVElNRShzdGF0ZSwgaW50ZXJ2YWwpIHsKICAgICAgc3RhdGUuY3VycmVudFRpbWUgPSBuZXcgRGF0ZSgpOwogICAgfSwKCiAgICBTVEFSVF9USU1FUihzdGF0ZSwgewogICAgICBhY3Rpdml0eUlkLAogICAgICBuYW1lCiAgICB9KSB7CiAgICAgIGlmIChzdGF0ZS50aW1lclN0YXRlICE9PSAicnVubmluZyIpIHsKICAgICAgICBzdGF0ZS50aW1lclN0YXRlID0gInJ1bm5pbmciOwogICAgICAgIHN0YXRlLnRpbWVyU3RhcnRlZEF0ID0gbmV3IERhdGUoKTsKICAgICAgICBzdGF0ZS50aW1lckFjdGl2aXR5SWQgPSBhY3Rpdml0eUlkOwogICAgICAgIHN0YXRlLnRpbWVyQWN0aXZpdHlOYW1lID0gbmFtZTsKICAgICAgfQogICAgfSwKCiAgICBTVE9QX1RJTUVSKHN0YXRlKSB7CiAgICAgIGlmIChzdGF0ZS50aW1lclN0YXRlID09PSAicnVubmluZyIpIHsKICAgICAgICBzdGF0ZS50aW1lclN0YXRlID0gInN0b3BwZWQiOwogICAgICB9CiAgICB9LAoKICAgIFJFU0VUX1RJTUVSKHN0YXRlKSB7CiAgICAgIHN0YXRlLnRpbWVyU3RhdGUgPSAic3RvcHBlZCI7CiAgICAgIHN0YXRlLnRpbWVyU3RhcnRlZEF0ID0gbnVsbDsKICAgIH0KCiAgfSwKICBhY3Rpb25zOiB7CiAgICBhc3luYyBzdG9wVGltZXJBbmRTYXZlKHsKICAgICAgZGlzcGF0Y2gsCiAgICAgIGdldHRlcnMsCiAgICAgIHJvb3RHZXR0ZXJzLAogICAgICBjb21taXQsCiAgICAgIHN0YXRlCiAgICB9KSB7CiAgICAgIGNvbnN0IGFjdGl2aXR5ID0gcm9vdEdldHRlcnNbImFjdGl2aXRpZXMvYWN0aXZpdHlCeUlkIl0oc3RhdGUudGltZXJBY3Rpdml0eUlkKTsKICAgICAgY29uc3QgYWN0aXZpdHlXaXRoVXBkYXRlZER1cmF0aW9uID0geyAuLi5hY3Rpdml0eSwKICAgICAgICBkdXJhdGlvbjogZ2V0dGVycy50aW1lckRpZmYKICAgICAgfTsKICAgICAgYXdhaXQgZGlzcGF0Y2goImFjdGl2aXRpZXMvdXBkYXRlQWN0aXZpdHkiLCBhY3Rpdml0eVdpdGhVcGRhdGVkRHVyYXRpb24sIHsKICAgICAgICByb290OiB0cnVlCiAgICAgIH0pOwogICAgICBjb21taXQoIlJFU0VUX1RJTUVSIik7CiAgICB9CgogIH0sCiAgZ2V0dGVyczogewogICAgY3VycmVudFRpbWUoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLmN1cnJlbnRUaW1lOwogICAgfSwKCiAgICB0aW1lckRpZmYoc3RhdGUsIGdldHRlcnMsIHJvb3RTdGF0ZSwgcm9vdEdldHRlcnMpIHsKICAgICAgaWYgKCFzdGF0ZS50aW1lclN0YXJ0ZWRBdCkgcmV0dXJuICIwMDowMDowMCI7CiAgICAgIGNvbnN0IGFjdGl2aXR5ID0gcm9vdEdldHRlcnNbImFjdGl2aXRpZXMvYWN0aXZpdHlCeUlkIl0oc3RhdGUudGltZXJBY3Rpdml0eUlkKTsKICAgICAgY29uc3QgYWN0aXZpdHlEdXJhdGlvbiA9IGFjdGl2aXR5LmR1cmF0aW9uIHx8IDA7CiAgICAgIGNvbnN0IGRpZmYgPSBNYXRoLmFicyhNYXRoLmNlaWwoKHN0YXRlLmN1cnJlbnRUaW1lIC0gc3RhdGUudGltZXJTdGFydGVkQXQpIC8gMTAwMCkpOwogICAgICByZXR1cm4gYWN0aXZpdHlEdXJhdGlvbiArIGRpZmY7CiAgICB9LAoKICAgIGFjdGl2aXR5VGl0bGUoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLnRpbWVyQWN0aXZpdHlOYW1lOwogICAgfQoKICB9Cn07"},{"version":3,"sources":["/home/artur/programowanie/organiser/client/src/store/modules/timer.js"],"names":["namespaced","state","currentTime","timerState","timerStartedAt","timerActivityId","timerActivityName","mutations","SET_CURRENT_TIME","interval","Date","START_TIMER","activityId","name","STOP_TIMER","RESET_TIMER","actions","stopTimerAndSave","dispatch","getters","rootGetters","commit","activity","activityWithUpdatedDuration","duration","timerDiff","root","rootState","activityDuration","diff","Math","abs","ceil","activityTitle"],"mappings":"AAAA,eAAe;AACbA,EAAAA,UAAU,EAAE,IADC;AAGbC,EAAAA,KAAK,EAAE,OAAO;AACZC,IAAAA,WAAW,EAAE,IADD;AAEZC,IAAAA,UAAU,EAAE,SAFA;AAGZC,IAAAA,cAAc,EAAE,IAHJ;AAIZC,IAAAA,eAAe,EAAE,EAJL;AAKZC,IAAAA,iBAAiB,EAAE;AALP,GAAP,CAHM;AAWbC,EAAAA,SAAS,EAAE;AACTC,IAAAA,gBAAgB,CAACP,KAAD,EAAQQ,QAAR,EAAkB;AAChCR,MAAAA,KAAK,CAACC,WAAN,GAAoB,IAAIQ,IAAJ,EAApB;AACD,KAHQ;;AAITC,IAAAA,WAAW,CAACV,KAAD,EAAQ;AAAEW,MAAAA,UAAF;AAAcC,MAAAA;AAAd,KAAR,EAA8B;AACvC,UAAIZ,KAAK,CAACE,UAAN,KAAqB,SAAzB,EAAoC;AAClCF,QAAAA,KAAK,CAACE,UAAN,GAAmB,SAAnB;AACAF,QAAAA,KAAK,CAACG,cAAN,GAAuB,IAAIM,IAAJ,EAAvB;AACAT,QAAAA,KAAK,CAACI,eAAN,GAAwBO,UAAxB;AACAX,QAAAA,KAAK,CAACK,iBAAN,GAA0BO,IAA1B;AACD;AACF,KAXQ;;AAYTC,IAAAA,UAAU,CAACb,KAAD,EAAQ;AAChB,UAAIA,KAAK,CAACE,UAAN,KAAqB,SAAzB,EAAoC;AAClCF,QAAAA,KAAK,CAACE,UAAN,GAAmB,SAAnB;AACD;AACF,KAhBQ;;AAiBTY,IAAAA,WAAW,CAACd,KAAD,EAAQ;AACjBA,MAAAA,KAAK,CAACE,UAAN,GAAmB,SAAnB;AACAF,MAAAA,KAAK,CAACG,cAAN,GAAuB,IAAvB;AACD;;AApBQ,GAXE;AAkCbY,EAAAA,OAAO,EAAE;AACP,UAAMC,gBAAN,CAAuB;AAAEC,MAAAA,QAAF;AAAYC,MAAAA,OAAZ;AAAqBC,MAAAA,WAArB;AAAkCC,MAAAA,MAAlC;AAA0CpB,MAAAA;AAA1C,KAAvB,EAA0E;AACxE,YAAMqB,QAAQ,GAAGF,WAAW,CAAC,yBAAD,CAAX,CACfnB,KAAK,CAACI,eADS,CAAjB;AAGA,YAAMkB,2BAA2B,GAAG,EAClC,GAAGD,QAD+B;AAElCE,QAAAA,QAAQ,EAAEL,OAAO,CAACM;AAFgB,OAApC;AAIA,YAAMP,QAAQ,CAAC,2BAAD,EAA8BK,2BAA9B,EAA2D;AACvEG,QAAAA,IAAI,EAAE;AADiE,OAA3D,CAAd;AAGAL,MAAAA,MAAM,CAAC,aAAD,CAAN;AACD;;AAbM,GAlCI;AAkDbF,EAAAA,OAAO,EAAE;AACPjB,IAAAA,WAAW,CAACD,KAAD,EAAQ;AACjB,aAAOA,KAAK,CAACC,WAAb;AACD,KAHM;;AAIPuB,IAAAA,SAAS,CAACxB,KAAD,EAAQkB,OAAR,EAAiBQ,SAAjB,EAA4BP,WAA5B,EAAyC;AAChD,UAAI,CAACnB,KAAK,CAACG,cAAX,EAA2B,OAAO,UAAP;AAC3B,YAAMkB,QAAQ,GAAGF,WAAW,CAAC,yBAAD,CAAX,CACfnB,KAAK,CAACI,eADS,CAAjB;AAGA,YAAMuB,gBAAgB,GAAGN,QAAQ,CAACE,QAAT,IAAqB,CAA9C;AACA,YAAMK,IAAI,GAAGC,IAAI,CAACC,GAAL,CACXD,IAAI,CAACE,IAAL,CAAU,CAAC/B,KAAK,CAACC,WAAN,GAAoBD,KAAK,CAACG,cAA3B,IAA6C,IAAvD,CADW,CAAb;AAGA,aAAOwB,gBAAgB,GAAGC,IAA1B;AACD,KAdM;;AAePI,IAAAA,aAAa,CAAChC,KAAD,EAAQ;AACnB,aAAOA,KAAK,CAACK,iBAAb;AACD;;AAjBM;AAlDI,CAAf","sourcesContent":["export default {\n  namespaced: true,\n\n  state: () => ({\n    currentTime: null,\n    timerState: \"stopped\",\n    timerStartedAt: null,\n    timerActivityId: \"\",\n    timerActivityName: \"\",\n  }),\n\n  mutations: {\n    SET_CURRENT_TIME(state, interval) {\n      state.currentTime = new Date();\n    },\n    START_TIMER(state, { activityId, name }) {\n      if (state.timerState !== \"running\") {\n        state.timerState = \"running\";\n        state.timerStartedAt = new Date();\n        state.timerActivityId = activityId;\n        state.timerActivityName = name;\n      }\n    },\n    STOP_TIMER(state) {\n      if (state.timerState === \"running\") {\n        state.timerState = \"stopped\";\n      }\n    },\n    RESET_TIMER(state) {\n      state.timerState = \"stopped\";\n      state.timerStartedAt = null;\n    },\n  },\n\n  actions: {\n    async stopTimerAndSave({ dispatch, getters, rootGetters, commit, state }) {\n      const activity = rootGetters[\"activities/activityById\"](\n        state.timerActivityId\n      );\n      const activityWithUpdatedDuration = {\n        ...activity,\n        duration: getters.timerDiff,\n      };\n      await dispatch(\"activities/updateActivity\", activityWithUpdatedDuration, {\n        root: true,\n      });\n      commit(\"RESET_TIMER\");\n    },\n  },\n\n  getters: {\n    currentTime(state) {\n      return state.currentTime;\n    },\n    timerDiff(state, getters, rootState, rootGetters) {\n      if (!state.timerStartedAt) return \"00:00:00\";\n      const activity = rootGetters[\"activities/activityById\"](\n        state.timerActivityId\n      );\n      const activityDuration = activity.duration || 0;\n      const diff = Math.abs(\n        Math.ceil((state.currentTime - state.timerStartedAt) / 1000)\n      );\n      return activityDuration + diff;\n    },\n    activityTitle(state) {\n      return state.timerActivityName;\n    }\n  },\n};\n"]}]}